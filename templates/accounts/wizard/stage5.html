{% extends "accounts/wizard/base.html" %}

{% block title %}Stage 5: Weight History | Chase The Zones{% endblock %}

{% block content %}
<div>
  <div class="mb-4">
    <a href="{% url 'wizard_stage_4' %}?sport_index={{ total_sports|add:"-1" }}" class="inline-flex items-center text-sm text-gray-500 transition-colors hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300">
      <svg class="stroke-current mr-2" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none">
        <path d="M12.7083 5L7.5 10.2083L12.7083 15.4167" stroke="" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
      Back to Metrics
    </a>
  </div>

  <div class="mb-8">
    <h1 class="mb-2 font-semibold text-gray-800 text-title-sm dark:text-white/90 sm:text-title-md">
      Track Your Weight
    </h1>
    <p class="text-sm text-gray-500 dark:text-gray-400">
      Optional: Adding your weight helps us calculate power-to-weight ratios for better performance insights.
    </p>
  </div>

  <form method="post" class="space-y-5">
    {% csrf_token %}
    <input type="hidden" name="action" value="add_weight">
    
    <!-- Current Weight -->
    <div>
      <label for="{{ form.current_weight.id_for_label }}" class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">
        Current Weight (lbs) <span class="text-gray-400">(Optional)</span>
      </label>
      <input
        type="number"
        id="{{ form.current_weight.id_for_label }}"
        name="{{ form.current_weight.name }}"
        placeholder="e.g., 165.5"
        value="{{ form.current_weight.value|default:'' }}"
        step="0.01"
        min="50"
        class="dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"
      />
      {% if form.current_weight.errors %}
        <p class="mt-1 text-sm text-red-600 dark:text-red-400">{{ form.current_weight.errors.0 }}</p>
      {% endif %}
    </div>

    <!-- Backdated Checkbox -->
    <div>
      <label class="flex items-center gap-3 cursor-pointer group">
        <input
          type="checkbox"
          name="{{ form.add_backdated.name }}"
          value="on"
          class="w-5 h-5 rounded text-primary bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 focus:ring-primary"
          {% if form.add_backdated.value %}checked{% endif %}
        />
        <span class="text-sm font-medium text-gray-700 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white transition-colors">
          Add historical weight entries
        </span>
      </label>
    </div>

    <!-- Buttons -->
    <div class="pt-4 space-y-3">
      <button
        type="submit"
        class="w-full h-11 rounded-lg bg-primary text-white font-medium transition-colors hover:bg-primary/90 active:bg-primary/80"
      >
        Save Weight & Continue
      </button>
    </div>
  </form>
  
  <form method="post" class="mt-3">
    {% csrf_token %}
    <input type="hidden" name="action" value="skip">
    <button
      type="submit"
      class="w-full h-11 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white font-medium transition-colors hover:bg-gray-300 dark:hover:bg-gray-600"
    >
      Skip This Step
    </button>
  </form>

  <!-- Info Box -->
  <div class="mt-6 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg">
    <p class="text-sm text-amber-800 dark:text-amber-300">
      ðŸ’¡ <strong>Why weight matters:</strong> We use this to calculate your power-to-weight ratio, which is a key metric for climbing performance.
    </p>
  </div>
</div>
{% endblock %}
