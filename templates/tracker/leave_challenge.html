{% extends "base.html" %}
{% block title %}Leave Challenge{% endblock %}
{% block page_title %}Leave Challenge{% endblock %}

{% block content %}
<div class="mb-6">
  <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Leave Challenge</h1>
  <p class="text-gray-600 dark:text-gray-400">Are you sure you want to leave this challenge?</p>
</div>

<div class="rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-6 shadow-sm">
  <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Challenge Details</h2>
  
  <div class="mb-6">
    <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-2">{{ challenge_instance.challenge.name }}</h3>
    <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">{{ challenge_instance.challenge.description|default:"No description" }}</p>
    <p class="text-xs text-gray-500 dark:text-gray-500">Started: {{ challenge_instance.started_at|date:"M d, Y" }}</p>
  </div>
  
  {% if not can_leave %}
  <div class="mb-6 rounded-lg border border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20 p-4">
    <div class="font-semibold text-red-900 dark:text-red-200 mb-2">⚠️ Cannot Leave Challenge</div>
    <p class="text-sm text-red-800 dark:text-red-300">{{ error_msg }}</p>
  </div>
  {% else %}
  <div class="mb-6 rounded-lg border border-yellow-200 dark:border-yellow-800 bg-yellow-50 dark:bg-yellow-900/20 p-4">
    <div class="font-semibold text-yellow-900 dark:text-yellow-200 mb-2">ℹ️ What happens when you leave?</div>
    <ul class="text-sm text-yellow-800 dark:text-yellow-300 space-y-1 list-disc list-inside">
      <li>Your challenge progress will be saved</li>
      <li>You will no longer be in this active challenge</li>
      <li>You can join another challenge or generate standalone plans</li>
      <li>You can retake this challenge later if it's available</li>
    </ul>
  </div>
  {% endif %}
  
  <form method="post" class="flex gap-3 justify-end">
    {% csrf_token %}
    <a href="{% url 'tracker:challenges_list' %}" class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
      Cancel
    </a>
    {% if can_leave %}
      <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary-dark rounded-lg transition-colors">
        Yes, Leave Challenge
      </button>
    {% endif %}
  </form>
</div>
{% endblock %}
